<?xml version="1.0" encoding="utf-8"?>
<machine name="root" init="idle">
  <state name="idle" init="">
    <transition condition="user.show" tostate="root.create" />
  </state>
  <state name="create">
    <transition condition="true" tostate="root.fadein" />
  </state>
  <state name="fadein" init="">
    <transition condition="wait" timeout="0.9" tostate="root.levelup" />
  </state>
  <state name="levelup">
    <transition condition="pose.finished" timeout="0.9" tostate="root.running" />
  </state>
  <state name="running" init="">
    <transition condition="user.pause" tostate="root.pause@lE" />
    <transition condition="game.over" tostate="root.over" />
  </state>
  <state name="pause">
    <!-- stop something here -->
    <transition condition="user.resume" tostate="root.resume" />
    <transition condition="user.restart" tostate="root.restart" />
    <transition condition="user.save_quit" tostate="root.save_quit" />
  </state>
  <state name="resume">
    <!-- resume something here-->
    <transition condition="pause.isidle" tostate="root.running@Le" />
  </state>
  <state name="over">
    <transition condition="user.restart" tostate="root.restart" />
    <transition condition="user.quit" tostate="root.quit" />
  </state>
  <state name="restart">
    <transition condition="pause.isidle" tostate="root.running" />
    <transition condition="over.isidle" tostate="root.running" />
  </state>
  <state name="quit" >
    <transition condition="true" tostate="root.fadeout" />
  </state>
  <state name="save_quit" >
    <transition condition="true" tostate="root.fadeout" />
  </state>
  <state name="fadeout" init="">
    <transition condition="wait" timeout="0.9" tostate="root.sendresult" />
  </state>
  <state name="sendresult">
    <!-- send CAEventCommand(play.finished) to parent layer-->
    <transition condition="true" tostate="root.idle" />
  </state>
</machine>